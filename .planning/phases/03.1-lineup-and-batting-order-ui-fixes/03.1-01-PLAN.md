---
phase: 03.1-lineup-and-batting-order-ui-fixes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/batting-order/BattingOrderList.tsx
  - src/components/batting-order/BattingOrderList.module.css
  - src/components/lineup/LineupOptions.tsx
  - src/components/lineup/LineupOptions.module.css
autonomous: true

must_haves:
  truths:
    - "Batting order list shows numbered player names with no colored band badges"
    - "Lineup option cards are stacked vertically and fully visible without horizontal scrolling"
    - "Each lineup option card shows a compact per-player bench summary (who sits which innings)"
  artifacts:
    - path: "src/components/batting-order/BattingOrderList.tsx"
      provides: "Clean batting order list without band badges"
      not_contains: "getBand"
    - path: "src/components/batting-order/BattingOrderList.module.css"
      provides: "Batting order list styles without band classes"
      not_contains: ".bandLabel"
    - path: "src/components/lineup/LineupOptions.tsx"
      provides: "Vertical card layout with compact bench summary"
      not_contains: "Inn ${inn}"
    - path: "src/components/lineup/LineupOptions.module.css"
      provides: "Vertical card container styles"
      contains: "flex-direction: column"
  key_links:
    - from: "src/components/batting-order/BattingOrderList.tsx"
      to: "../../types/index"
      via: "Player type import only (no logic imports)"
      pattern: "import type.*Player.*from"
    - from: "src/components/lineup/LineupOptions.tsx"
      to: "../../types/index"
      via: "POSITIONS constant for bench computation"
      pattern: "POSITIONS\\.map"
---

<objective>
Remove band badges from batting order list and fix lineup option cards to be vertically stacked with meaningful bench summaries.

Purpose: Addresses three UAT issues -- band badges confused coaches, option cards were cut off on mobile, and "Option 1/2/3" labels were meaningless without seeing bench rotation details prominently.

Output: Updated BattingOrderList (band-free) and LineupOptions (vertical cards with per-player bench summary).
</objective>

<execution_context>
@C:/Users/nicho/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/nicho/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03.1-lineup-and-batting-order-ui-fixes/03.1-RESEARCH.md
@src/components/batting-order/BattingOrderList.tsx
@src/components/batting-order/BattingOrderList.module.css
@src/components/lineup/LineupOptions.tsx
@src/components/lineup/LineupOptions.module.css
@src/types/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove band badges from BattingOrderList</name>
  <files>
    src/components/batting-order/BattingOrderList.tsx
    src/components/batting-order/BattingOrderList.module.css
  </files>
  <action>
In BattingOrderList.tsx:
- Remove the `import { getBand } from '../../logic/batting-order'` import
- Remove the `bandStyleMap` constant (lines 10-14)
- Remove the `const totalPlayers = order.length` line
- Remove the `const band = getBand(index, totalPlayers)` line inside the map callback
- Remove the entire `<span className={...bandLabel...}>` element that renders the band badge
- Keep everything else: Player type import, styles import, BattingOrderListProps interface, component structure, position number span, name span
- The component should render only: position number + player name per row

In BattingOrderList.module.css:
- Remove the `.bandLabel` class (lines 30-35)
- Remove the `.top` class (lines 37-39)
- Remove the `.middle` class (lines 41-44)
- Remove the `.bottom` class (lines 46-49)
- Keep all other styles: `.list`, `.item`, `.position`, `.name`

Do NOT remove BattingBand type from types/index.ts -- it is used internally by the fairness algorithm in batting-order.ts.
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm no type errors.
Run `npx vitest run` to confirm all tests pass.
Visually confirm BattingOrderList.tsx has no reference to getBand, bandStyleMap, or bandLabel.
  </verify>
  <done>
BattingOrderList renders a numbered list of player names with no band badges. No imports from batting-order logic. CSS has no band-related classes. All existing tests pass.
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix LineupOptions to vertical cards with compact bench summary</name>
  <files>
    src/components/lineup/LineupOptions.tsx
    src/components/lineup/LineupOptions.module.css
  </files>
  <action>
In LineupOptions.module.css:
- Change `.cardContainer` from horizontal scroll to vertical stack:
  - Set `flex-direction: column`
  - Remove `overflow-x: auto`
  - Remove `scroll-snap-type: x mandatory`
  - Remove `padding-bottom: var(--space-sm)` (was for scrollbar space)
  - Keep `display: flex` and `gap: var(--space-md)`
- Change `.card`:
  - Remove `flex: 0 0 auto` and `width: 200px` (was for fixed horizontal cards)
  - Set `width: 100%` so cards fill the container
  - Remove `scroll-snap-align: start`
  - Keep all other card styles: padding, border, border-radius, background, cursor, text-align, font-family, font-size
- Keep all other classes unchanged: `.card:hover`, `.cardSelected`, `.cardTitle`, `.benchSummary`, `.options`, `.heading`, `.subtitle`

In LineupOptions.tsx:
- Replace the `getBenchSummary` function with a new `getCompactBenchSummary` function that returns a per-player bench summary string:
  - For each present player, collect which inning numbers they are benched
  - Format as: "Alex (1, 4), Sam (2, 5), Pat (3)" -- player name followed by bench inning numbers in parentheses
  - Players with no bench innings should not appear in the summary
  - Sort by first bench inning number (ascending) for consistent ordering
- Update the render to use the new function:
  - Keep "Option {N}" as the card title (per research recommendation)
  - Replace the benchText split-by-newline rendering with a simple single-line text rendering of the compact bench summary
  - Label it "Bench:" before the summary text for clarity
  - If no players are benched (edge case with exactly 9 players), show "No bench" instead

The component MUST remain pure presentational -- no hooks. The computation is a pure function of props.
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm no type errors.
Run `npx vitest run` to confirm all tests pass.
Run dev server (`npx vite --port 5180`) and visually verify:
  1. Cards stack vertically (no horizontal scroll)
  2. Each card shows "Option N" title
  3. Below title, shows "Bench: Alex (1, 4), Sam (2, 5)" format
  4. All cards are fully visible without scrolling horizontally
  </verify>
  <done>
LineupOptions renders cards in a vertical stack with full width. Each card shows "Option N" with a compact per-player bench summary showing who sits which innings. No horizontal scrolling. All existing tests pass.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with zero errors
2. `npx vitest run` passes all existing tests
3. BattingOrderList has zero references to getBand, bandStyleMap, or band CSS classes
4. LineupOptions cards are vertical, full-width, with per-player bench summaries
5. No hooks added to any presentational component
</verification>

<success_criteria>
- Batting order list shows position numbers and names only (no colored band badges)
- Lineup option cards are vertically stacked and fully visible
- Each lineup option card shows compact bench summary in "PlayerName (inn, inn)" format
- TypeScript compiles cleanly, all tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/03.1-lineup-and-batting-order-ui-fixes/03.1-01-SUMMARY.md`
</output>

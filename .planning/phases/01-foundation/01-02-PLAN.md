---
phase: 01-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - src/components/roster/PlayerInput.tsx
  - src/components/roster/PlayerInput.module.css
  - src/components/roster/PlayerList.tsx
  - src/components/roster/PlayerList.module.css
  - src/components/roster/PlayerRow.tsx
  - src/components/roster/PlayerRow.module.css
  - src/components/roster/RosterPage.tsx
  - src/components/roster/RosterPage.module.css
  - src/components/app-shell/AppShell.tsx
autonomous: true

must_haves:
  truths:
    - "User can type a player name and press Enter to add them"
    - "Duplicate player name shows a warning message"
    - "Added player names are auto-capitalized"
    - "Player list is always sorted alphabetically"
    - "Player count is visible on the roster (e.g. '12 players')"
    - "Clicking a player name makes it editable inline"
    - "Pressing Enter or clicking away saves the edited name"
    - "Pressing Escape reverts the edit"
    - "Delete button shows Confirm/Cancel before removing"
    - "Empty roster shows a helpful message"
    - "Roster persists across page refresh"
  artifacts:
    - path: "src/components/roster/PlayerInput.tsx"
      provides: "Quick-add input form with Enter-to-submit"
      exports: ["PlayerInput"]
    - path: "src/components/roster/PlayerList.tsx"
      provides: "Sorted player list with count display"
      exports: ["PlayerList"]
    - path: "src/components/roster/PlayerRow.tsx"
      provides: "Inline edit + delete confirmation for single player"
      exports: ["PlayerRow"]
    - path: "src/components/roster/RosterPage.tsx"
      provides: "Roster tab container wiring all roster components"
      exports: ["RosterPage"]
  key_links:
    - from: "src/components/roster/RosterPage.tsx"
      to: "src/hooks/useRoster.ts"
      via: "consumes useRoster hook for state"
      pattern: "useRoster\\(\\)"
    - from: "src/components/roster/PlayerInput.tsx"
      to: "src/hooks/useRoster.ts"
      via: "calls addPlayer via prop from RosterPage"
      pattern: "onAdd"
    - from: "src/components/roster/PlayerRow.tsx"
      to: "src/hooks/useRoster.ts"
      via: "calls renamePlayer and removePlayer via props"
      pattern: "onRename|onDelete"
    - from: "src/components/app-shell/AppShell.tsx"
      to: "src/components/roster/RosterPage.tsx"
      via: "renders RosterPage in roster tab panel"
      pattern: "<RosterPage"
---

<objective>
Build the complete Roster management page with quick-add input, inline editing, delete confirmation, and alphabetical player list with count.

Purpose: Deliver ROST-01 (add players) and ROST-02 (edit/remove players) -- the core roster management features the coach needs before anything else works.
Output: Fully functional Roster tab where coaches can add, edit, and remove players with all user-specified interaction patterns.
</objective>

<execution_context>
@C:/Users/nicho/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/nicho/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@C:/repos/baseball-coach-helper/.planning/PROJECT.md
@C:/repos/baseball-coach-helper/.planning/ROADMAP.md
@C:/repos/baseball-coach-helper/.planning/phases/01-foundation/01-CONTEXT.md
@C:/repos/baseball-coach-helper/.planning/phases/01-foundation/01-RESEARCH.md
@C:/repos/baseball-coach-helper/.planning/phases/01-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build PlayerInput, PlayerRow, and PlayerList components</name>
  <files>
    src/components/roster/PlayerInput.tsx
    src/components/roster/PlayerInput.module.css
    src/components/roster/PlayerRow.tsx
    src/components/roster/PlayerRow.module.css
    src/components/roster/PlayerList.tsx
    src/components/roster/PlayerList.module.css
  </files>
  <action>
    1. Create `src/components/roster/PlayerInput.tsx`:
       - Props: `onAdd: (name: string) => { success: boolean; error?: string }`
       - Render a `<form>` with a single text input and an "Add" submit button
       - Input placeholder: "Add player (e.g. Jake R)"
       - On submit: call `onAdd(value)`, if success clear input and refocus for next entry, if error display it below the input
       - Error message uses `role="alert"` for accessibility
       - Clear error when user types again
       - Input has `autoComplete="off"` and `aria-label="Player name"`
       Follow the pattern from 01-RESEARCH.md Code Examples "Quick-Add Player Input" exactly.

    2. Create `src/components/roster/PlayerInput.module.css`:
       - Form: flex row layout, gap var(--space-sm)
       - Input: flex-grow, min-height var(--min-tap-size), padding var(--space-sm) var(--space-md), font-size var(--font-size-lg), border 1px solid var(--color-border), border-radius var(--radius-sm)
       - Add button: min-height var(--min-tap-size), padding var(--space-sm) var(--space-lg), background var(--color-primary), color white, font-size var(--font-size-base), font-weight 600, border none, border-radius var(--radius-sm), cursor pointer
       - Error message: color var(--color-danger), font-size var(--font-size-sm), margin-top var(--space-xs)

    3. Create `src/components/roster/PlayerRow.tsx`:
       - Props: `player: Player`, `onRename: (id: string, newName: string) => void`, `onDelete: (id: string) => void`
       - Render the player name as an `<input>` element styled to look like plain text (single-input inline edit pattern)
       - Track editing value in local state, initialized from `player.name`
       - On hover: subtle background appears (CSS handles this)
       - On focus/click: input becomes visually editable (border appears via CSS :focus)
       - On blur or Enter: trim value, if empty revert to original name, else auto-capitalize and call `onRename(player.id, newValue)`. IMPORTANT: defer re-sorting until blur -- do NOT re-sort while the user is typing (the useRoster hook sorts on read, but since we use local state for the editing value, this works naturally).
       - On Escape: revert to original name and blur the input
       - Sync local editing value when `player.name` prop changes (for when rename is applied)
       - Delete button: implement two-step confirmation pattern. Initial state shows "Remove" button. First click replaces with "Confirm" + "Cancel" buttons. "Confirm" calls `onDelete(player.id)`. "Cancel" reverts to showing "Remove". Use a `confirmingDelete` boolean state.
       - ARIA: input has `aria-label="Edit player name: {name}"`, Remove button has `aria-label="Remove {name}"`
       Follow the patterns from 01-RESEARCH.md Pattern 1 and "Delete Confirmation Pattern" exactly.

    4. Create `src/components/roster/PlayerRow.module.css`:
       - Row: flex layout, align-items center, gap var(--space-sm), padding var(--space-xs) 0
       - Inline edit input: transparent background, transparent border, padding var(--space-sm) var(--space-md), font-size var(--font-size-lg), min-height var(--min-tap-size), width 100%, cursor pointer, font-family inherit, color var(--color-text)
       - Inline edit :hover: background var(--color-surface-hover)
       - Inline edit :focus: outline 2px solid var(--color-focus), outline-offset 2px, background var(--color-surface), border-color var(--color-border), cursor text
       - Delete/Confirm/Cancel buttons: min-height var(--min-tap-size), font-size var(--font-size-sm), border-radius var(--radius-sm)
       - Remove button: color var(--color-danger), background transparent, border 1px solid var(--color-danger)
       - Confirm button: background var(--color-danger), color white
       - Cancel button: background transparent, border 1px solid var(--color-border)
       Follow the CSS from 01-RESEARCH.md exactly.

    5. Create `src/components/roster/PlayerList.tsx`:
       - Props: `players: Player[]`, `onRename: (id: string, newName: string) => void`, `onDelete: (id: string) => void`
       - Display player count at top: "{N} players" (or "1 player" for singular). Per user decision: show player count visible on the roster.
       - If players array is empty, show message: "No players yet. Add your first player above."
       - Map over players array, rendering a `PlayerRow` for each. Use `player.id` as the React key (NOT index, NOT name -- stable key prevents focus loss during re-sort).

    6. Create `src/components/roster/PlayerList.module.css`:
       - Count display: color var(--color-text-muted), font-size var(--font-size-sm), margin-bottom var(--space-md), font-weight 500
       - Empty state: color var(--color-text-muted), font-size var(--font-size-base), padding var(--space-xl) 0, text-align center
       - List: flex column, gap var(--space-xs)
  </action>
  <verify>
    - `npm run build` passes with zero errors
    - PlayerInput.tsx exports PlayerInput component
    - PlayerRow.tsx exports PlayerRow component with inline edit and delete confirmation
    - PlayerList.tsx exports PlayerList component with count and empty state
    - All CSS module files exist with correct class names
  </verify>
  <done>
    Three roster components built: PlayerInput (quick-add form with Enter-to-submit and error display), PlayerRow (inline edit with single-input pattern + two-step delete confirmation), PlayerList (sorted list with player count and empty state). All follow locked user decisions for interaction patterns and 01-RESEARCH.md patterns for implementation.
  </done>
</task>

<task type="auto">
  <name>Task 2: Wire RosterPage container and integrate into AppShell</name>
  <files>
    src/components/roster/RosterPage.tsx
    src/components/roster/RosterPage.module.css
    src/components/app-shell/AppShell.tsx
  </files>
  <action>
    1. Create `src/components/roster/RosterPage.tsx`:
       - Call `useRoster()` hook directly in this component (not prop-drilled from AppShell -- per 01-RESEARCH.md anti-pattern guidance)
       - Render `<PlayerInput onAdd={addPlayer} />` at the top
       - Render `<PlayerList players={players} onRename={renamePlayer} onDelete={removePlayer} />` below
       - Page title: "Roster" as an h2

    2. Create `src/components/roster/RosterPage.module.css`:
       - Page container: flex column, gap var(--space-lg)
       - Title: font-size var(--font-size-xl), font-weight 600, margin 0

    3. Update `src/components/app-shell/AppShell.tsx`:
       - Import RosterPage
       - Replace the roster tab placeholder text with `<RosterPage />`
       - Keep the game-setup tab placeholder as-is (Plan 03 will replace it)
  </action>
  <verify>
    - `npm run dev` loads the app, Roster tab shows PlayerInput and PlayerList
    - Type "Jake R" + Enter: "Jake R" appears in the list, input clears, focus returns to input
    - Type "jake r" + Enter: duplicate warning appears below input
    - Type "sarah m" + Enter: "Sarah M" appears (auto-capitalized), list is alphabetical (Jake R, Sarah M)
    - Click "Jake R" text: input becomes editable, type "Jacob R", press Enter: name updates to "Jacob R"
    - Click "Remove" on a player: "Confirm" and "Cancel" appear, click "Confirm": player is removed
    - Player count updates correctly (e.g., "2 players" -> "1 player")
    - Refresh the page: players persist
    - Empty the roster: "No players yet" message appears
    - `npm run build` passes with zero errors
  </verify>
  <done>
    Roster tab is fully functional. Coach can add players with quick-add (Enter to submit), see them sorted alphabetically with a count, click to edit names inline, and delete with confirmation. Duplicate detection and auto-capitalization work. Data persists in localStorage across page refresh. Requirements ROST-01 and ROST-02 are complete.
  </done>
</task>

</tasks>

<verification>
- All roster CRUD operations work: add, edit (inline), delete (with confirmation)
- Names are auto-capitalized on add and edit
- Duplicate names are rejected with a warning
- List is always alphabetically sorted
- Player count is visible and accurate
- Empty state message shows when roster is empty
- Data persists in localStorage
- All interactive elements have min 44px tap targets
- No console errors
</verification>

<success_criteria>
- ROST-01: User can add players with first name and last initial via quick-add input
- ROST-02: User can edit player names inline and remove players with confirmation
- Roster is sorted alphabetically with visible player count
- All interaction patterns match locked user decisions exactly
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>

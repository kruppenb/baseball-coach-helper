---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - tsconfig.app.json
  - tsconfig.node.json
  - vite.config.ts
  - index.html
  - src/main.tsx
  - src/App.tsx
  - src/App.module.css
  - src/index.css
  - src/types/index.ts
  - src/hooks/useLocalStorage.ts
  - src/hooks/useRoster.ts
  - src/styles/tokens.css
  - src/components/app-shell/AppShell.tsx
  - src/components/app-shell/AppShell.module.css
  - src/components/app-shell/TabBar.tsx
  - src/components/app-shell/TabBar.module.css
autonomous: true

must_haves:
  truths:
    - "App loads in browser at localhost with no console errors"
    - "Two tabs visible: Roster and Game Setup"
    - "Clicking a tab switches visible content"
    - "Keyboard arrow keys navigate between tabs"
    - "Roster data persists in localStorage across page refresh"
  artifacts:
    - path: "src/types/index.ts"
      provides: "Player, GameConfig, TabId type definitions"
      exports: ["Player", "GameConfig", "TabId"]
    - path: "src/hooks/useLocalStorage.ts"
      provides: "localStorage persistence with error handling and in-memory fallback"
      exports: ["useLocalStorage"]
    - path: "src/hooks/useRoster.ts"
      provides: "Roster state management (add, rename, remove, toggle, sort)"
      exports: ["useRoster"]
    - path: "src/styles/tokens.css"
      provides: "CSS custom properties for colors, spacing, typography, touch targets"
      contains: "--min-tap-size"
    - path: "src/components/app-shell/AppShell.tsx"
      provides: "Tab container rendering active tab content"
      exports: ["AppShell"]
    - path: "src/components/app-shell/TabBar.tsx"
      provides: "Accessible tab navigation with ARIA roles"
      exports: ["TabBar"]
  key_links:
    - from: "src/App.tsx"
      to: "src/components/app-shell/AppShell.tsx"
      via: "renders AppShell as root UI"
      pattern: "<AppShell"
    - from: "src/components/app-shell/AppShell.tsx"
      to: "src/components/app-shell/TabBar.tsx"
      via: "renders TabBar for navigation"
      pattern: "<TabBar"
    - from: "src/hooks/useRoster.ts"
      to: "src/hooks/useLocalStorage.ts"
      via: "persists roster via useLocalStorage"
      pattern: "useLocalStorage.*roster"
    - from: "src/styles/tokens.css"
      to: "src/index.css"
      via: "tokens imported in global styles"
      pattern: "@import.*tokens"
---

<objective>
Scaffold the Vite + React + TypeScript project, establish shared types, hooks, design tokens, and build the app shell with tabbed navigation.

Purpose: Create the foundation that all Phase 1 UI components build on -- types, state management, persistence, design system, and navigation structure.
Output: A running app with two tabs (Roster, Game Setup) showing placeholder content, backed by working hooks and types ready for UI implementation.
</objective>

<execution_context>
@C:/Users/nicho/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/nicho/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@C:/repos/baseball-coach-helper/.planning/PROJECT.md
@C:/repos/baseball-coach-helper/.planning/ROADMAP.md
@C:/repos/baseball-coach-helper/.planning/STATE.md
@C:/repos/baseball-coach-helper/.planning/phases/01-foundation/01-CONTEXT.md
@C:/repos/baseball-coach-helper/.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Vite project with types, hooks, and design tokens</name>
  <files>
    package.json
    tsconfig.json
    tsconfig.app.json
    tsconfig.node.json
    vite.config.ts
    index.html
    src/main.tsx
    src/index.css
    src/types/index.ts
    src/hooks/useLocalStorage.ts
    src/hooks/useRoster.ts
    src/styles/tokens.css
  </files>
  <action>
    1. Scaffold the project using `npm create vite@latest . -- --template react-ts` (note: scaffold into the current directory since the repo already exists as a git repo). After scaffolding, run `npm install`.

    2. Remove the Vite template boilerplate files: `src/App.css`, `src/assets/react.svg`, `public/vite.svg`. Remove the default counter demo content from App.tsx (will be replaced in Task 2).

    3. Create `src/types/index.ts` with these exact type definitions:
       - `Player` interface: `{ id: string; name: string; isPresent: boolean }`
       - `GameConfig` interface: `{ innings: 5 | 6 }`
       - `TabId` type: `'roster' | 'game-setup' | 'lineup' | 'history'` (lineup and history are future tabs, define now so the type is complete)

    4. Create `src/hooks/useLocalStorage.ts` implementing a generic `useLocalStorage<T>(key, initialValue)` hook:
       - Test localStorage availability with a real write attempt (`canUseLocalStorage()` check)
       - Initialize state from localStorage if available, else use initialValue
       - Sync state to localStorage on change via useEffect
       - Support updater function pattern: `setValue(prev => newValue)`
       - Fall back to in-memory state if localStorage unavailable (private browsing)
       - Wrap all localStorage operations in try-catch
       Follow the pattern from 01-RESEARCH.md Pattern 4 exactly.

    5. Create `src/hooks/useRoster.ts` implementing the `useRoster()` hook:
       - Uses `useLocalStorage<Player[]>('roster', [])` for persistence
       - `addPlayer(name)` returns `{ success: boolean; error?: string }` -- validates non-empty, checks case-insensitive duplicate, auto-capitalizes (first letter of each word), generates `crypto.randomUUID()` for id, defaults `isPresent: true`
       - `renamePlayer(id, newName)` -- auto-capitalizes the new name
       - `removePlayer(id)` -- filters by id
       - `togglePresent(id)` -- flips isPresent boolean
       - `resetAttendance()` -- sets all players to isPresent: true
       - Returns `{ players: sortedPlayers, playerCount, presentCount, addPlayer, renamePlayer, removePlayer, togglePresent, resetAttendance }`
       - `sortedPlayers` is always sorted alphabetically by name using `localeCompare`
       Follow the pattern from 01-RESEARCH.md Pattern 2 exactly.

    6. Create `src/styles/tokens.css` with CSS custom properties for the design system:
       - Colors: high-contrast palette suitable for outdoor/sunlight use (--color-bg, --color-surface, --color-surface-hover, --color-text, --color-text-muted, --color-text-dimmed, --color-primary, --color-danger, --color-focus, --color-border, --color-border-strong)
       - Spacing scale: --space-xs (4px) through --space-2xl (32px)
       - Typography: system font stack, sizes from --font-size-sm (0.875rem) to --font-size-2xl (1.5rem)
       - Touch targets: --min-tap-size: 44px
       - Border radius: --radius-sm (4px), --radius-md (8px), --radius-lg (12px)
       - Shadow: --shadow-sm
       Follow the token values from 01-RESEARCH.md Pattern 5 exactly.

    7. Update `src/index.css` to import tokens.css and add a minimal global reset:
       - `@import './styles/tokens.css';`
       - Set `box-sizing: border-box` on all elements
       - Set body to use `--font-family`, `--color-text`, `--color-bg`, `--font-size-base`
       - Remove all Vite template default styles
  </action>
  <verify>
    - `npm run build` completes with zero errors
    - `src/types/index.ts` exports Player, GameConfig, TabId
    - `src/hooks/useLocalStorage.ts` exports useLocalStorage
    - `src/hooks/useRoster.ts` exports useRoster
    - `src/styles/tokens.css` contains --min-tap-size and all token categories
  </verify>
  <done>
    Project scaffolded with React 19 + TypeScript + Vite. Types defined for Player, GameConfig, TabId. useLocalStorage hook handles persistence with error handling. useRoster hook provides all roster CRUD operations with auto-capitalization, duplicate detection, and alphabetical sorting. Design tokens defined in CSS custom properties. Build passes with zero errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build app shell with accessible tabbed navigation</name>
  <files>
    src/components/app-shell/TabBar.tsx
    src/components/app-shell/TabBar.module.css
    src/components/app-shell/AppShell.tsx
    src/components/app-shell/AppShell.module.css
    src/App.tsx
    src/App.module.css
  </files>
  <action>
    1. Create `src/components/app-shell/TabBar.tsx`:
       - Accept props: `tabs: Array<{ id: string; label: string; disabled?: boolean }>`, `activeTab: string`, `onTabChange: (tabId: string) => void`
       - Render a `<div role="tablist">` containing `<button role="tab">` for each tab
       - Set `aria-selected`, `aria-controls="panel-{id}"`, `tabIndex` (0 for active, -1 for inactive)
       - Support `disabled` prop on individual tabs (for future Lineup/History tabs)
       - Implement keyboard navigation: ArrowRight/ArrowLeft cycle through enabled tabs, wrapping at ends
       - Active tab gets a visual indicator (bottom border or background change)
       Follow the pattern from 01-RESEARCH.md Pattern 3.

    2. Create `src/components/app-shell/TabBar.module.css`:
       - Tab bar: horizontal flex layout, border-bottom for visual separation
       - Each tab: min-height var(--min-tap-size), padding var(--space-md) var(--space-lg), font-size var(--font-size-lg)
       - Active state: bold text + colored bottom border (--color-primary)
       - Disabled state: --color-text-muted, cursor not-allowed, reduced opacity
       - No transition animations (keep it snappy and utility-first per user decision)

    3. Create `src/components/app-shell/AppShell.tsx`:
       - Manage active tab state with useState, defaulting to 'roster'
       - Define tab configuration array with two enabled tabs: { id: 'roster', label: 'Roster' } and { id: 'game-setup', label: 'Game Setup' }. Optionally include disabled future tabs for Lineup and History to show the tab bar scales.
       - Render TabBar at the top, content area below
       - Render tab panels conditionally: each panel wrapped in `<div role="tabpanel" id="panel-{id}" aria-labelledby="tab-{id}">`, only show the active panel
       - For now, render placeholder text in each panel: "Roster page coming in Plan 02" and "Game Setup page coming in Plan 03"
       - App header: show app title "Lineup Builder" in a compact header above the tabs

    4. Create `src/components/app-shell/AppShell.module.css`:
       - Shell layout: full viewport height, flex column
       - Header: compact, padding var(--space-md) var(--space-lg), font-size var(--font-size-xl), font-weight bold
       - Content area: flex-grow, overflow-y auto, padding var(--space-lg)
       - Max-width constraint (e.g. 600px) centered for readability on desktop while filling screen on mobile

    5. Update `src/App.tsx` to render `<AppShell />` as the sole child. Remove all Vite template boilerplate.

    6. Create `src/App.module.css` with minimal root styles (or leave empty if AppShell handles everything).
  </action>
  <verify>
    - `npm run dev` starts and app loads at localhost
    - Two tabs visible: "Roster" and "Game Setup"
    - Clicking each tab switches the visible content
    - Arrow keys navigate between tabs when a tab is focused
    - Active tab has a visual indicator (bottom border)
    - `npm run build` passes with zero errors
    - No console errors or warnings in the browser
  </verify>
  <done>
    App shell renders with "Lineup Builder" header and tabbed navigation. Roster and Game Setup tabs switch content. Tabs are fully accessible with ARIA roles and keyboard navigation. Placeholder content shown for each tab. App runs in browser with no errors. Ready for Plan 02 and Plan 03 to replace placeholders with real page content.
  </done>
</task>

</tasks>

<verification>
- App starts with `npm run dev` and loads at localhost with no errors
- Two tabs are visible and functional (click and keyboard)
- Tab switch changes visible content area
- `npm run build` produces a clean production build
- All types, hooks, and tokens are importable from their respective paths
</verification>

<success_criteria>
- Running Vite dev server serves the app with two working tabs
- Player, GameConfig, TabId types are exported and correct
- useLocalStorage persists data to localStorage (verifiable via browser devtools)
- useRoster provides add/rename/remove/toggle/reset operations
- Design tokens are defined and referenced in global styles
- Zero TypeScript errors, zero build warnings
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
